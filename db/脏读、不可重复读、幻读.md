
## 事务特性
ACID：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）

## 概念
脏读 ：脏读就是指当一个事务正在访问数据，并且对数据进行了修改，而这种修改还没有提交到数据库中，这时，另外一个事务也访问这个数据，然后使用了这个数据

不可重复读 ：是指在一个事务内，多次读同一数据。在这个事务还没有结束时，另外一个事务也访问该同一数据。那么，在第一个事务中的两次读数据之间，由于第二个事务的修改，那么第一个事务两次读到的的数据可能是不一样的。这样就发生了在一个事务内两次读到的数据是不一样的，因此称为是不可重复读。

幻读 : 在可重复读隔离级别时，第一个事务，进行一次查询，另一个事务随后插入了一条数据并提交，第一个事务根据查询结果判断没有这条数据（多次查询也一样，因为是快照读），就又执行插入语句，结果执行失败，报错已经存在这条数据（当前读）。  
参考：<https://www.zhihu.com/question/47007926/answer/222348887>  
mysql的幻读并非什么读取两次返回结果集不同，而是事务在插入事先检测不存在的记录时，惊奇的发现这些数据已经存在了，之前的检测读获取到的数据如同鬼影一般。

 ## 事务隔离级别
读未提交READ_UNCOMMITTED 会出现脏读、不可重复读、幻读 ( 隔离级别最低，并发性能高 )  
读已提交READ_COMMITTED  会出现不可重复读、幻读问题（锁定正在读取的行）。oracle默认隔离级别是读已提交。  
可重复读REPEATABLE_READ 会出幻读（锁定所读取的所有行）。mysql默认事务隔离级别是可重复读。
串行化SERIALIZABLE 保证所有的情况不会发生（锁表）  

## 开启事务、提交/回滚事务
### sql
开启：START TRANSACTION; 或者BEGIN;
提交：commit;
回滚：rollback;
### jdbc代码
开启：conn.setAutoCommit(false);
提交：conn.commit();
回滚：conn.rollback();

